{"ast":null,"code":"const jwt = require('jsonwebtoken');\nconst User = require('../models/User');\nconst authenticate = async (req, res, next) => {\n  var _req$headers$authoriz;\n  const token = (_req$headers$authoriz = req.headers.authorization) === null || _req$headers$authoriz === void 0 ? void 0 : _req$headers$authoriz.split(' ')[1];\n  if (!token) {\n    return res.status(401).json({\n      message: 'Authentication required'\n    });\n  }\n  try {\n    const decodedToken = jwt.verify(token, process.env.SECRET_KEY);\n    req.user = decodedToken; // Attach user info to request object\n    next(); // Proceed to the next middleware or route handler\n  } catch (error) {\n    res.status(403).json({\n      message: 'Invalid or expired token'\n    });\n  }\n};\nmodule.exports = {\n  authenticate\n};","map":{"version":3,"names":["jwt","require","User","authenticate","req","res","next","_req$headers$authoriz","token","headers","authorization","split","status","json","message","decodedToken","verify","process","env","SECRET_KEY","user","error","module","exports"],"sources":["C:/Users/piteg/source/repos/p-iteghie/GamePlan/client/src/middlewares/auth.js"],"sourcesContent":["const jwt = require('jsonwebtoken');\r\nconst User = require('../models/User');\r\n\r\nconst authenticate = async (req, res, next) => {\r\n  const token = req.headers.authorization?.split(' ')[1];\r\n\r\n  if (!token) {\r\n    return res.status(401).json({ message: 'Authentication required' });\r\n  }\r\n\r\n  try {\r\n    const decodedToken = jwt.verify(token, process.env.SECRET_KEY);\r\n    req.user = decodedToken;  // Attach user info to request object\r\n    next();  // Proceed to the next middleware or route handler\r\n  } catch (error) {\r\n      res.status(403).json({ message: 'Invalid or expired token' });\r\n  }\r\n};\r\n\r\nmodule.exports = { authenticate };"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,cAAc,CAAC;AACnC,MAAMC,IAAI,GAAGD,OAAO,CAAC,gBAAgB,CAAC;AAEtC,MAAME,YAAY,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAAA,IAAAC,qBAAA;EAC7C,MAAMC,KAAK,IAAAD,qBAAA,GAAGH,GAAG,CAACK,OAAO,CAACC,aAAa,cAAAH,qBAAA,uBAAzBA,qBAAA,CAA2BI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAEtD,IAAI,CAACH,KAAK,EAAE;IACV,OAAOH,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAA0B,CAAC,CAAC;EACrE;EAEA,IAAI;IACF,MAAMC,YAAY,GAAGf,GAAG,CAACgB,MAAM,CAACR,KAAK,EAAES,OAAO,CAACC,GAAG,CAACC,UAAU,CAAC;IAC9Df,GAAG,CAACgB,IAAI,GAAGL,YAAY,CAAC,CAAE;IAC1BT,IAAI,CAAC,CAAC,CAAC,CAAE;EACX,CAAC,CAAC,OAAOe,KAAK,EAAE;IACZhB,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAA2B,CAAC,CAAC;EACjE;AACF,CAAC;AAEDQ,MAAM,CAACC,OAAO,GAAG;EAAEpB;AAAa,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}